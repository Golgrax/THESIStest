<DashboardScreen>:
    name: "dashboard"

    canvas.before:
        Color:
            rgba: 243/255, 233/255, 226/255, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        # Top bar outside the scrollable area
        MDTopAppBar:
            title: ""
            font_name: "BPoppins"
            pos_hint: {"top": 0.98}
            elevation: 0
            md_bg_color: 250/255, 188/255, 63/255, 1
            size_hint_y: None
            height: dp(45)

            # Centered BoxLayout for the logo and label
            BoxLayout:
                orientation: 'horizontal'
                size_hint: None, None
                size: self.width, dp(45)  # Make it the same height as the MDTopAppBar
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                padding: [dp(10), 0]  # Adjust the padding as needed

                # Label beside the logo
                MDLabel:
                    text: "PETWATCH"
                    font_name: "BPoppins"
                    font_size: "20sp"  # Adjusted font size for better fit
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1 
                    halign: "right"
                    valign: "center"
                    pos_hint: {"center_y": 0.5}
                    width: self.texture_size[0]
                    width: self.parent.width
                    size_hint: None, None

        # Scrollable content area
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                orientation: 'vertical'
                spacing: 0
                size_hint_y: None
                height: self.minimum_height

                Image:
                    source: 'assets/dashboard.png'
                    size_hint_y: None
                    height: dp(140)  
                    allow_stretch: True
                    keep_ratio: False
                    pos_hint: {"top": 1}

                MDLabel:
                    id: user_label
                    text: "Hello, [b]Name[/b]"
                    halign: "center"
                    markup: True
                    font_name: "MPoppins"
                    font_size: "18sp"
                    size_hint_y: None
                    height: dp(40)
                    theme_text_color: "Custom"
                    text_color: 79/255, 54/255, 48/255, 1

                MDGridLayout:
                    cols: 1
                    spacing: dp(10)
                    padding: dp(10)
                    adaptive_height: True
                    size_hint_x: None
                    width: self.parent.width 

                    MDCard:
                        size_hint: None, None
                        size: self.parent.width - dp(20), dp(120)  
                        md_bg_color: 1, 1, 1, 1
                        radius: [15]
                        elevation: 1
                        padding: dp(5)

                        MDBoxLayout:
                            orientation: 'horizontal'
                            spacing: dp(5)
                            size_hint_y: None
                            height: dp(70)  

                            MDIconButton:
                                icon: "image-plus"
                                pos_hint: {"center_x": 0.5, "center_y": 1.3}
                                theme_icon_color: "Custom"
                                icon_color: 79/255, 54/255, 48/255, 1

                            MDBoxLayout:
                                orientation: 'vertical'
                                spacing: dp(5)
                                padding: [0, 0, 0, dp(5)]
                                width: self.parent.width

                                MDLabel:
                                    id: pet_name_label
                                    text: "Pet Name"
                                    font_name: "BPoppins"
                                    font_size: "17sp"
                                    theme_text_color: "Custom"
                                    text_color: 79/255, 54/255, 48/255, 1
                                    halign: "left"  

                                MDGridLayout:
                                    cols: 1
                                    size_hint_y: None
                                    height: dp(80)
                                    padding: [dp(10), dp(10), dp(10), 0]
                                    pos_hint: {"center_x": 0.5}  

                                    MDLabel:
                                        text: "Breed"
                                        id: pet_breed_label
                                        font_name: "MPoppins"
                                        theme_text_color: "Custom"
                                        text_color: 79/255, 54/255, 48/255, 0.8
                                        halign: "left"  

                                    MDLabel:
                                        text: "Age"
                                        id: pet_age_label
                                        font_name: "MPoppins"
                                        theme_text_color: "Custom"
                                        text_color: 79/255, 54/255, 48/255, 0.8
                                        halign: "left"  

                                    MDLabel:
                                        text: "Sex"
                                        id: pet_gender_label
                                        font_name: "MPoppins"
                                        theme_text_color: "Custom"
                                        text_color: 79/255, 54/255, 48/255, 0.8
                                        halign: "left"  

                # Temperature widgets layout
                MDGridLayout:
                    cols: 2
                    spacing: dp(10)
                    padding: dp(10)
                    adaptive_height: True
                    size_hint_x: None  
                    width: self.parent.width  

                    # First widget for temperature "38Â°C"
                    MDCard:
                        size_hint: None, None
                        size: self.parent.width / 2 - dp(15), dp(110)  
                        md_bg_color: 1, 1, 1, 1
                        radius: [15]
                        elevation: 1
                        padding: dp(10)
                        on_release: root.manager.current = 'thermal_camera'

                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: dp(10)
                            padding: dp(10)

                            MDIconButton:
                                icon: "thermometer"
                                theme_icon_color: "Custom"
                                icon_color: 235/255, 143/255, 52/255, 1
                                pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDLabel:
                                id: dashboard_temp
                                text: "N/A"
                                font_name: "MPoppins"
                                font_size: "18sp"
                                halign: "center"
                                theme_text_color: "Custom"
                                text_color: 79/255, 54/255, 48/255, 1

                    # Second widget for status "Normal"
                    MDCard:
                        size_hint: None, None
                        size: self.parent.width / 2 - dp(15), dp(110)  
                        md_bg_color: 1, 1, 1, 1
                        radius: [15]
                        elevation: 1
                        padding: dp(10)

                        MDBoxLayout:
                            orientation: "vertical"
                            spacing: dp(10)
                            padding: dp(10)

                            MDIconButton:
                                id: status_icon
                                icon: "check-circle"
                                theme_icon_color: "Custom"
                                icon_color: 34/255, 139/255, 34/255, 1 
                                pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDLabel:
                                id: status_label
                                text: "N/A"
                                font_name: "MPoppins"
                                font_size: "18sp"
                                halign: "center"
                                theme_text_color: "Custom"
                                text_color: 34/255, 139/255, 34/255, 1  # Green

        # Bottom navigation stays outside of the scrollable area
        MDBottomNavigation:
            panel_color: 250/255, 177/255, 47/255, 1
            selected_color_background: 1, 1, 1, 0  
            text_color_active: 79/255, 54/255, 48/255, 1
            text_color_normal: 217/255, 90/255, 26/255, 1
            size_hint_y: 0.2
            

            MDBottomNavigationItem:
                name: "home"
                icon: "home"
                text: "Home"
                md_bg_color: 243/255, 233/255, 226/255, 1
                on_tab_press: root.home()
                  
            MDBottomNavigationItem:
                name: "activitylogs"
                icon: "file-document"
                text: "Activity Logs"
                md_bg_color: 243/255, 233/255, 226/255, 1
                on_tab_press: root.activity_logs()
                
            MDBottomNavigationItem:
                name: "camera"
                icon: "camera"
                text: "Camera"
                md_bg_color: 243/255, 233/255, 226/255, 1
                on_tab_press: root.go_to_live_feed()

            MDBottomNavigationItem:
                name: "pet"
                icon: "dog"
                text: "Pet"
                md_bg_color: 243/255, 233/255, 226/255, 1
                on_tab_press: root.pet_tab()

            MDBottomNavigationItem:
                name: "profile"
                icon: "account"
                text: "Profile"
                md_bg_color: 251/255, 228/255, 189/255, 1
                on_tab_press: root.profile_tab()